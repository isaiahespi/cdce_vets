---
title: "Survey Experiment"
author:
  - name: Isaiah
    #orcid: 0000-0002-0760-5497
    #corresponding: true
    degrees:
    email: gespinoz@umd.edu
    roles:
      - Research Assistant
      - Reviewer
      - Analyst
    affiliations:
      - Center for Democracy and Civic Engagement
      - University of Maryland at College Park 
  # - name: Rowan Cockett
  #   orcid: 0000-0002-7859-8394
  #   corresponding: false
  #   roles: []
  #   affiliations:
  #     - Curvenote

phone: (410) 903 6911
email: ssnovey@umd.edu
department: Center for Democracy and Civic Engagement
keywords:
  - Election Workers
  - Poll workers
  - Veterans
  - Public opinion
  - Election administration
plain-language-summary: |
  Analysis and results of survey experiment.
key-points:  
  - Lorem ipsum odor amet, consectetuer adipiscing elit.
  - Lorem ipsum odor amet, consectetuer adipiscing elit.
  - Lorem ipsum odor amet, consectetuer adipiscing elit.
date: 2024-09-12
# bibliography: references.bib
# csl: american-political-science-association.csl
link-citations: true
tbl-cap-location: top
reference-location: document
citation:
  container-title: Center for Democracy and Civic Engagement, University of Maryland
number-sections: false
execute: 
  cache: true
---



```{r}
#| label: packages
#| echo: false
#| output: false

# load packages
library(tidyverse)
library(janitor)
library(kableExtra)


```


```{r}
#| label: load-df
#| include: false

# load data
load("data/df-2024-09-11.Rdata") # df set as factor with dummy vars
load("data/data_numeric_vets_survey-exp-2024-09-11.Rdata") # numeric only


```


```{r}
#| label: df-dict
#| include: false

# load data dictionary/codebook
df_dict <- read.csv("codebooks/df_dict.csv")

```


## Overview of demographic variables and balance

```{r}
#| label: tbl-1


# table of treatment and control groups
df |>
  gtsummary::tbl_summary(
    by = group,
    include = c(age, gender, race, educ, milserv1, milserv2, milservfam),
    statistic = list(
      age ~ "{mean} ({sd})",
      gtsummary::all_categorical() ~ "{n} ({p}%)"
    ),
    type = list(
      milserv1 ~ "categorical",
      milserv2 ~ "categorical",
      milservfam ~ "categorical"
    ),
    missing = "ifany"
  ) |>
  gtsummary::add_overall() |>
  gtsummary::modify_header(label = "**Variable**") |>
  gtsummary::bold_labels() |>
    gtsummary::as_kable_extra(
      booktabs = T,
      longtable = T
    ) |>  
    kableExtra::kable_styling(
      position = "left", 
      fixed_thead = T,
      font_size = 12,  
      bootstrap_options = c("striped", "hover", "responsive")
    )


```

# Crosstabs



## Q5. Attention Paid to Political Affairs

```{r}
#| label: tbl-q5q19
#| results: asis

df |> 
  janitor::tabyl(q5.clps, q19.clps, group, show_na = F) |> 
  janitor::adorn_percentages("row") |> 
  janitor::adorn_pct_formatting(digits = 2, affix_sign = F) |>
  janitor::adorn_title("combined", 
                       row_name = "Q5", col_name = "Q19") |>
  bind_rows(.id = "group_var") |>    
  gt::gt(
    rowname_col = "row_var",
    groupname_col = "group_var") |> 
  gt::tab_style(
    style = gt::cell_text(weight = "bold"),
    locations = gt::cells_row_groups()
  )


```


```{r}
#| label: tbl-q5q20
#| results: asis

df |> 
  janitor::tabyl(q5.clps, q20.clps, group, show_na = F) |> 
  janitor::adorn_percentages("row") |> 
  janitor::adorn_pct_formatting(digits = 2, affix_sign = F) |>
  janitor::adorn_title("combined", 
                       row_name = "Q5", col_name = "Q20") |>
  bind_rows(.id = "group_var") |>    
  gt::gt(
    rowname_col = "row_var",
    groupname_col = "group_var") |> 
  gt::tab_style(
    style = gt::cell_text(weight = "bold"),
    locations = gt::cells_row_groups()
  )

```

```{r}
#| results: asis

df |> 
  janitor::tabyl(q5.clps, q21.clps, group, show_na = F) |> 
  janitor::adorn_percentages("row") |> 
  janitor::adorn_pct_formatting(digits = 2, affix_sign = F) |>
  janitor::adorn_title("combined", 
                       row_name = "Q5", col_name = "Q21") |>
  bind_rows(.id = "group_var") |>    
  gt::gt(
    rowname_col = "row_var",
    groupname_col = "group_var") |> 
  gt::tab_style(
    style = gt::cell_text(weight = "bold"),
    locations = gt::cells_row_groups()
  )


```

```{r}
#| results: asis

df |> 
  janitor::tabyl(q5.clps, q22.clps, group, show_na = F) |> 
  janitor::adorn_percentages("row") |> 
  janitor::adorn_pct_formatting(digits = 2, affix_sign = F) |>
  janitor::adorn_title("combined", 
                       row_name = "Q5", col_name = "Q22") |>
  bind_rows(.id = "group_var") |>    
  gt::gt(
    rowname_col = "row_var",
    groupname_col = "group_var") |> 
  gt::tab_style(
    style = gt::cell_text(weight = "bold"),
    locations = gt::cells_row_groups()
  )


```


```{r}
#| results: asis

df |> 
  janitor::tabyl(q5.clps, q23.clps, group, show_na = F) |> 
  janitor::adorn_percentages("row") |> 
  janitor::adorn_pct_formatting(digits = 2, affix_sign = F) |>
  janitor::adorn_title("combined", 
                       row_name = "Q5", col_name = "Q23") |>
  bind_rows(.id = "group_var") |>    
  gt::gt(
    rowname_col = "row_var",
    groupname_col = "group_var") |> 
  gt::tab_style(
    style = gt::cell_text(weight = "bold"),
    locations = gt::cells_row_groups()
  )


```

```{r}
#| results: asis

df |> 
  janitor::tabyl(q5.clps, q24.clps, group, show_na = F) |> 
  janitor::adorn_percentages("row") |> 
  janitor::adorn_pct_formatting(digits = 2, affix_sign = F) |>
  janitor::adorn_title("combined", 
                       row_name = "Q5", col_name = "Q24") |>
  bind_rows(.id = "group_var") |>    
  gt::gt(
    rowname_col = "row_var",
    groupname_col = "group_var") |> 
  gt::tab_style(
    style = gt::cell_text(weight = "bold"),
    locations = gt::cells_row_groups()
  )


```

```{r}
#| results: asis

df |> 
  janitor::tabyl(q5.clps, q25.clps, group, show_na = F) |> 
  janitor::adorn_percentages("row") |> 
  janitor::adorn_pct_formatting(digits = 2, affix_sign = F) |>
  janitor::adorn_title("combined", 
                       row_name = "Q5", col_name = "Q25") |>
  bind_rows(.id = "group_var") |>    
  gt::gt(
    rowname_col = "row_var",
    groupname_col = "group_var") |> 
  gt::tab_style(
    style = gt::cell_text(weight = "bold"),
    locations = gt::cells_row_groups()
  )


```

```{r}
#| results: asis

df |> 
  janitor::tabyl(q5.clps, q26.clps, group, show_na = F) |> 
  janitor::adorn_percentages("row") |> 
  janitor::adorn_pct_formatting(digits = 2, affix_sign = F) |>
  janitor::adorn_title("combined", 
                       row_name = "Q5", col_name = "Q26") |>
  bind_rows(.id = "group_var") |>    
  gt::gt(
    rowname_col = "row_var",
    groupname_col = "group_var") |> 
  gt::tab_style(
    style = gt::cell_text(weight = "bold"),
    locations = gt::cells_row_groups()
  )


```

```{r}
#| results: asis

df |> 
  janitor::tabyl(q5.clps, q27.clps, group, show_na = F) |> 
  janitor::adorn_percentages("row") |> 
  janitor::adorn_pct_formatting(digits = 2, affix_sign = F) |>
  janitor::adorn_title("combined", 
                       row_name = "Q5", col_name = "Q27") |>
  bind_rows(.id = "group_var") |>    
  gt::gt(
    rowname_col = "row_var",
    groupname_col = "group_var") |> 
  gt::tab_style(
    style = gt::cell_text(weight = "bold"),
    locations = gt::cells_row_groups()
  )


```

### Q6


### Q7


### Q8

