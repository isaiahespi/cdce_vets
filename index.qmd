---
title: "Survey Experiment"
author:
  - name: Isaiah
    #orcid: 0000-0002-0760-5497
    #corresponding: true
    degrees:
    email: gespinoz@umd.edu
    roles:
      - Research Assistant
      - Reviewer
      - Analyst
    affiliations:
      - Center for Democracy and Civic Engagement
      - University of Maryland at College Park 
  # - name: Rowan Cockett
  #   orcid: 0000-0002-7859-8394
  #   corresponding: false
  #   roles: []
  #   affiliations:
  #     - Curvenote

phone: (410) 903 6911
email: ssnovey@umd.edu
department: Center for Democracy and Civic Engagement
keywords:
  - Election Workers
  - Poll workers
  - Veterans
  - Public opinion
  - Election administration
plain-language-summary: |
  Analysis and results of survey experiment.
key-points:  
  - Lorem ipsum odor amet, consectetuer adipiscing elit.
  - Lorem ipsum odor amet, consectetuer adipiscing elit.
  - Lorem ipsum odor amet, consectetuer adipiscing elit.
date: last-modified
# bibliography: references.bib
# csl: american-political-science-association.csl
link-citations: true
tbl-cap-location: top
reference-location: document
notebook-links: false
filters: 
  - abstract-section
citation:
  container-title: Center for Democracy and Civic Engagement, University of Maryland
number-sections: false
---

# Abstract


## Introduction

```{r}
#| label: packages
#| echo: false
#| output: false

# load packages
library(tidyverse)
library(janitor)
library(kableExtra)
library(easystats)
library(labelled)
library(sjlabelled)
library(pewmethods)
library(surveytoolbox)
library(gtsummary)
library(gt)

```


```{r}
#| label: load-df
#| include: false

# load data
load("data/df-2024-09-11.Rdata") # df set as factor with dummy vars
load("data/data_numeric_vets_survey-exp-2024-09-11.Rdata") # numeric only


```


```{r}
#| label: df-dict

# load data dictionary/codebook
df_dict <- read.csv("codebooks/df_dict.csv")

```

```{r}
#| label: read-crabs

# these are crosstabs contained in one list each saved as .RData
# each file contains a list of multiple crosstabs where responses from q19 to
# q46 are crossed by one pre-treatment survey question (e.g., q5) and grouped by
# experiment condition. That is, the explanatory variable is in the rows,
# responses from question 19 to question 46 are in the columns, and cross
# tabulation is further stratified by experimental condition, treatment or
# control.
q5_crabs <- readRDS("data/q5_crabs.RData")
q6_crabs <- readRDS("data/q6_crabs.RData")
q7_crabs <- readRDS("data/q7_crabs.RData")
q8_crabs <- readRDS("data/q8_crabs.RData")
party_crabs <- readRDS("data/party_crabs.RData")
```


# Overview of demographic variables and balance

```{r}
#| label: tbl-balance
#| warning: false
#| message: false

# table of treatment and control groups
df |>
  gtsummary::tbl_summary(
    by = group,
    include = c(age, gender, race, educ, milserv1, milserv2, milservfam),
    statistic = list(
      age ~ "{mean} ({sd})",
      gtsummary::all_categorical() ~ "{n} ({p}%)"
    ),
    type = list(
      milserv1 ~ "categorical",
      milserv2 ~ "categorical",
      milservfam ~ "categorical"
    ),
    missing = "ifany"
  ) |>
  gtsummary::add_n() |>
  gtsummary::add_overall() |>
  gtsummary::modify_header(label = "**Variable**") |>
  gtsummary::bold_labels() |>
  gtsummary::as_gt() |>
  gt::tab_header("Table 1. Balance") |>
  gt::tab_footnote("Failure to complete survey, n = 120") |>
  gt::tab_options(table.font.size = "small",
                  data_row.padding = gt::px(1))



```

## Q5. Attention Paid to Political Affairs

The following crosstabulations 

```{r}
#| label: tbl-q5q19
#| results: asis

# iv = q5, dv = q19, z = group
kableExtra::kable(q5_crabs[[1]], format = "html")


```


```{r}
#| label: tbl-q5q20
#| results: asis

# iv = q5, dv = q20, z = group
kableExtra::kable(q5_crabs[[2]], format = "html")

```

