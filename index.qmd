---
title: "Survey Experiment"
author:
  - name: Isaiah
    #orcid: 0000-0002-0760-5497
    #corresponding: true
    degrees:
    email: gespinoz@umd.edu
    roles:
      - Research Assistant
      - Reviewer
      - Analyst
    affiliations:
      - Center for Democracy and Civic Engagement
      - University of Maryland at College Park 
  # - name: Rowan Cockett
  #   orcid: 0000-0002-7859-8394
  #   corresponding: false
  #   roles: []
  #   affiliations:
  #     - Curvenote

phone: (410) 903 6911
email: ssnovey@umd.edu
department: Center for Democracy and Civic Engagement
keywords:
  - Election Workers
  - Poll workers
  - Veterans
  - Public opinion
  - Election administration
plain-language-summary: |
  Analysis and results of survey experiment.
key-points:  
  - Lorem ipsum odor amet, consectetuer adipiscing elit.
  - Lorem ipsum odor amet, consectetuer adipiscing elit.
  - Lorem ipsum odor amet, consectetuer adipiscing elit.
date: 2024-09-12
# bibliography: references.bib
# csl: american-political-science-association.csl
link-citations: true
code-tools: 
    source: https://github.com/isaiahespi/cdce_vets/blob/4953d971910f5040e0fe591e65e807adf5a198f5/index.qmd
fig-responsive: true
smooth-scroll: true
embed-resources: true
link-external-newwindow: true
footnotes-hover: false
reference-location: document
page-layout: article
lightbox: true
citation:
  container-title: Center for Democracy and Civic Engagement, University of Maryland
number-sections: false
execute: 
  cache: false
  echo: false 
---



```{r}
#| label: setup
#| output: false

# load packages
library(tidyverse)
library(janitor)
library(table1)
library(kableExtra)

# load data
load("data/df-2024-09-11.Rdata") # df set as factor with dummy vars
load("data/data_numeric_vets_survey-exp-2024-09-11.Rdata") # numeric only

# load data dictionary/codebook
df_dict <- read.csv("codebooks/df_dict.csv")
```


```{r}
#| label: setup2
#| echo: false
#| output: false

# function to compute the p-value for continuous or categorical variables
pvalue <- function(x, ...) {
    # Construct vectors of data y, and groups (strata) g
    y <- unlist(x)
    g <- factor(rep(1:length(x), times=sapply(x, length)))
    if (is.numeric(y)) {
        # For numeric variables, perform a standard 2-sample t-test
        p <- t.test(y ~ g)$p.value
    } else {
        # For categorical variables, perform a chi-squared test of independence
        p <- chisq.test(table(y, g))$p.value
    }
    # Format the p-value, using an HTML entity for the less-than sign.
    # The initial empty string places the output on the line below the variable label.
    c("", sub("<", "&lt;", format.pval(p, digits=3, eps=0.001)))
}

# Pearson's chi-squared test is performed of the null hypothesis that the joint
# distribution of the cell counts in a 2-dimensional contingency table is the
# product of the row and column marginals





```

## Key Questions

The following presents some key results from the survey experiment.

### Q19

```{r}
#| tbl-cap: "Confidence vote counts will be accurate in Maricopa County, AZ by Experiment Condition"
#| fig-cap: "Confidence in Accurate Vote Count by Experiment Condition"
#| fig-cap-location: top
#| tbl-column: margin

# Crosstab of Q19 by treatment group
df |> 
  janitor::tabyl(group, q19, show_na = F) |>
  janitor::adorn_percentages(denominator = 'row') |>
  janitor::adorn_pct_formatting(digits = 1, affix_sign = F) |>
  janitor::adorn_ns() |> 
  janitor::adorn_title(
    'combined',
    row_name = "Group",
    col_name = 'Q19') |>
  gt::gt(
    rowname_col = 'Q19',
    groupname_col = 'Group' 
  ) |>  
  gt::cols_label(
    c('Group/Q19') ~ "Group") |> 
  gt::tab_style(
    style = gt::cell_text(weight = "bold"),
    locations = gt::cells_row_groups()
  ) |> 
  gt::tab_style(
    style = gt::cell_text(weight = 'bold'),
    locations = gt::cells_column_labels()
  ) |> 
  gt::tab_spanner(
    columns = 2:5,
    label = "Q19. Vote Count Confidence for Maricopa County, AZ"
  ) |>  
  gt::tab_style(
    style = gt::cell_text(weight = 'bold'),
    locations = gt::cells_column_spanners()
    ) |> 
  gt::tab_footnote(
    footnote = "Table reflects row percentages. NAs omitted") |> 
  gt::tab_footnote(
    footnote = "Q19. How confident are you that votes in Maricopa County, AZ will be counted as voters intend in the elections this November?",
    locations = gt::cells_column_spanners()) |> 
  gt::cols_align(align = 'left', columns = everything()) |> 
  gt::tab_options(
    table.font.size = "small",
    data_row.padding = gt::px(1)
  )

# df |> 
#   janitor::tabyl(group, q19, show_na = F) |>  
#   janitor::adorn_totals('both', na.rm = T) |> 
#   janitor::adorn_percentages(denominator = 'row') |>
#   janitor::adorn_pct_formatting(digits = 1, affix_sign = F) |>
#   janitor::adorn_ns() |> 
#   janitor::adorn_title(
#     'combined',
#     row_name = "Group",
#     col_name = 'Q19') |> 
#   kableExtra::kbl() |> 
#   kableExtra::kable_styling(
#     bootstrap_options = c("striped", "bordered", "condensed", "responsive"),
#     latex_options = "basic",
#     font_size = 13
#   )



# Q19 by experiment condition, barplot
df |> 
  # compute frequency within each combination
  group_by(group, q19) |> 
  count() |>  
  # compute proportion within group
  # n is the default variable created by count()
  group_by(group) |> 
  mutate(prop = round(n/sum(n), digits = 3),
         pct = prop*100,
         res = str_c(pct,'% (', n, ')', sep = "")) |> 
  ggplot(aes(x = q19, y = pct, fill = group))+
  geom_bar(position = 'dodge', stat = 'identity')+
  geom_text(aes(label = res), position = position_dodge(1.0), size = 2.5, vjust = -0.5)+
  scale_fill_grey(start = 0.5, end = 0.1)+
  # \n in a string tells R to break the line there
  labs(y = "Percentage",
       x = "Q19. How confident are you that votes in Maricopa County, AZ \nwill be counted as voters intend in the elections this November?",
       fill = "Group\nExperiment\nCondition",
       caption = 'Treatment n = 639, Control n = 624')+
  theme_bw()

```


### Q22 

```{r}
#| fig-cap: "Confidence in Fair Voting Process by Experiment Condition"
#| fig-cap-location: top
#| tbl-cap: "Q22. Confidence in Fair Voting Process by Experiment Condition in Maricopa County, AZ by Experiment Condition"
#| tbl-column: margin


# Crosstab of Q22 by treatment group
df |> 
  janitor::tabyl(group, q22, show_na = F) |>
  janitor::adorn_percentages(denominator = 'row') |>
  janitor::adorn_pct_formatting(digits = 1, affix_sign = F) |>
  janitor::adorn_ns() |> 
  janitor::adorn_title(
    'combined',
    row_name = "Group",
    col_name = 'Q22') |>
  gt::gt(
    rowname_col = 'Q22',
    groupname_col = 'Group' 
  ) |>  
  gt::cols_label(
    c('Group/Q22') ~ "Group") |> 
  gt::tab_style(
    style = gt::cell_text(weight = "bold"),
    locations = gt::cells_row_groups()
  ) |> 
  gt::tab_style(
    style = gt::cell_text(weight = 'bold'),
    locations = gt::cells_column_labels()
  ) |> 
  gt::tab_spanner(
    columns = 2:5,
    label = "Q22. Confidence in Fair Voting Process for Maricopa County, AZ"
  ) |>  
  gt::tab_style(
    style = gt::cell_text(weight = 'bold'),
    locations = gt::cells_column_spanners()
    ) |> 
  gt::tab_footnote(
    footnote = "Table reflects row percentages. NAs omitted") |> 
  gt::tab_footnote(
    footnote = "Q22.How confident are you that the voting process will be fair in Maricopa County, AZ?",
    locations = gt::cells_column_spanners()) |> 
  gt::cols_align(align = 'left', columns = everything()) |> 
  gt::tab_options(
    table.font.size = "small",
    data_row.padding = gt::px(1)
  )



# df |> 
#   janitor::tabyl(group, q22, show_na = F) |>  
#   janitor::adorn_totals('both', na.rm = T) |> 
#   janitor::adorn_percentages(denominator = 'row') |>
#   janitor::adorn_pct_formatting(digits = 1, affix_sign = F) |>
#   janitor::adorn_ns() |> 
#   janitor::adorn_title(
#     'combined',
#     row_name = "Group",
#     col_name = 'Q22') |> 
#   kableExtra::kbl() |> 
#   kableExtra::kable_styling(
#     bootstrap_options = c("striped", "bordered", "condensed", "responsive"),
#     latex_options = "basic",
#     font_size = 13
#   )



df |> 
  # compute frequency within each combination
  group_by(group, q22) |> 
  count() |>  
  # compute proportion within group
  # n is the default variable created by count()
  group_by(group) |> 
  mutate(prop = round(n/sum(n), digits = 3),
         pct = prop*100,
         res = str_c(pct,'% (', n, ')', sep = "")) |> 
  ggplot(aes(x = q22, y = pct, fill = group))+
  geom_bar(position = 'dodge', stat = 'identity')+
  geom_text(aes(label = res), position = position_dodge(1.0), size = 2.5 , vjust = -0.5)+
  scale_fill_grey(start = 0.5, end = 0.1)+
  # \n in a string tells R to break the line there
  labs(y = "Percentage",
       x = "Q22.How confident are you that the voting process will be fair in Maricopa County, AZ?",
       fill = "Group\nExperiment\nCondition",
       caption = 'Treatment n = 639, Control n = 624')+
  theme_bw()




```


### Q25

```{r}
#| fig-cap: "Concern for violence, threats, or voter intimidation in Maricopa County, AZ by Experiment Condition"
#| fig-cap-location: top
#| tbl-cap: "Concern for violence, threats, or voter intimidation in Maricopa County, AZ by Experiment Condition"
#| tbl-column: margin


# Crosstab of Q25 by treatment group
df |> 
  janitor::tabyl(group, q25, show_na = F) |>
  janitor::adorn_percentages(denominator = 'row') |>
  janitor::adorn_pct_formatting(digits = 1, affix_sign = F) |>
  janitor::adorn_ns() |> 
  janitor::adorn_title(
    'combined',
    row_name = "Group",
    col_name = 'Q25') |>
  gt::gt(
    rowname_col = 'Q25',
    groupname_col = 'Group' 
  ) |>  
  gt::cols_label(
    c('Group/Q25') ~ "Group") |> 
  gt::tab_style(
    style = gt::cell_text(weight = "bold"),
    locations = gt::cells_row_groups()
  ) |> 
  gt::tab_style(
    style = gt::cell_text(weight = 'bold'),
    locations = gt::cells_column_labels()
  ) |> 
  gt::tab_spanner(
    columns = 2:5,
    label = "Concern for violence, threats, or voter intimidation in Maricopa County, AZ"
  ) |>  
  gt::tab_style(
    style = gt::cell_text(weight = 'bold'),
    locations = gt::cells_column_spanners()
    ) |> 
  gt::tab_footnote(
    footnote = "Table reflects row percentages. NAs omitted") |> 
  gt::tab_footnote(
    footnote = "Q25. Thinking about Maricopa County, AZ, how concerned should voters feel \nabout potential violence, \nthreats of violence, or intimidation while voting in person at their local polling place?",
    locations = gt::cells_column_spanners()) |> 
  gt::cols_align(align = 'left', columns = everything()) |> 
  gt::tab_options(
    table.font.size = "small",
    data_row.padding = gt::px(1)
  )



# alternative crosstab
# df |> 
#   janitor::tabyl(group, q25, show_na = F) |>  
#   janitor::adorn_totals('both', na.rm = T) |> 
#   janitor::adorn_percentages(denominator = 'row') |>
#   janitor::adorn_pct_formatting(digits = 1, affix_sign = F) |>
#   janitor::adorn_ns() |> 
#   janitor::adorn_title(
#     'combined',
#     row_name = "Group",
#     col_name = 'Q25') |> 
#   kableExtra::kbl() |> 
#   kableExtra::kable_styling(
#     bootstrap_options = c("striped", "bordered", "condensed", "responsive"),
#     latex_options = "basic",
#     font_size = 13
#   )


# plot
df |> 
  mutate(q25 = forcats::fct_rev(q25)) |> 
  labelled::set_variable_labels(
    q25 = 'Concern for voter intimidation, threats, or violence'
  ) |> 
  ggstats::gglikert(include = q25,
                    y = 'group',
                    facet_rows = vars(.question))+
  labs(
    title = "Concern for voter intimidation, threats, or violence by Experiment Condition",
    subtitle = "Q25. Thinking about Maricopa County, AZ, how concerned should voters feel \nabout potential violence, \nthreats of violence, or intimidation while voting in person at their local polling place?")+
  theme_bw()+
  theme(legend.position = 'bottom')


# barplot alternative
# df |>
#   # compute frequency within each combination
#   group_by(group, q25) |>
#   count() |>
#   # compute proportion within group
#   # n is the default variable created by count()
#   group_by(group) |>
#   mutate(prop = round(n/sum(n), digits = 3),
#          pct = prop*100,
#          res = str_c(pct,'% (', n, ')', sep = "")) |>
#   ggplot(aes(x = q25, y = pct, fill = group))+
#   geom_col(position = 'dodge')+
#   geom_text(aes(label = res), position = position_dodge(1.0), size = 2.5 , vjust = -0.5)+
#   scale_fill_grey(start = 0.5, end = 0.1)+
#   # \n in a string tells R to break the line there
#   labs(y = "Percentage",
#        x = "Q25. Thinking about Maricopa County, AZ, how concerned \nshould voters feel about potential violence, \nthreats of violence, or intimidation while voting in person at their local polling place?",
#        fill = "Group\nExperiment\nCondition",
#        caption = 'Treatment n = 639, Control n = 624')+
#   theme_bw()







```

### Q26

```{r}
#| fig-cap: "In-person voter safety in Maricopa County, AZ by Experiment Condition"
#| fig-cap-location: top
#| tbl-cap: "Q26. In-person voter safety in Maricopa County, AZ by Experiment Condition"
#| tbl-column: margin


# q26
df |> 
  ggstats::gglikert(include = q26, 
                    variable_labels = c(q26 ="Confidence in Voter Safety"),
                    y = 'group',
                    facet_rows = vars(.question))+
  labs(
    title = "Confidence for In-person voter safety in Maricopa County, AZ by Experiment Condition",
    subtitle = "Q26. How confident, if at all, are you that in person polling places in Maricopa County, AZ \nwill be safe places for voters to cast their ballots during the upcoming elections in November?",
       caption = 'Treatment n = 638, Control n = 624')+
  theme_bw()+
  theme(legend.position = 'bottom')

# alternative bar plot
# df |> 
#   drop_na(q26) |> 
#   # compute frequency within each combination
#   group_by(group, q26) |> 
#   count() |>  
#   # compute proportion within group
#   # n is the default variable created by count()
#   group_by(group) |> 
#   mutate(prop = round(n/sum(n), digits = 3),
#          pct = prop*100,
#          res = str_c(pct,'% (', n, ')', sep = "")) |> 
#   ggplot(aes(x = q26, y = pct, fill = group))+
#   geom_col(position = 'dodge')+
#   geom_text(aes(label = res), position = position_dodge(1.0), size = 2.5 , vjust = -0.5)+
#   scale_fill_grey(start = 0.5, end = 0.1)+
#   # \n in a string tells R to break the line there
#   labs(y = "Percentage",
#        x = "Q26. How confident, if at all, are you that in person polling places in Maricopa County, AZ \nwill be safe places for voters to cast their ballots during the upcoming elections in November?",
#        fill = "Group\nExperiment\nCondition",
#        caption = 'Treatment n = 638, Control n = 624')+
#   theme_bw()



# Crosstab of Q26 by treatment group
df |> 
  janitor::tabyl(group, q26, show_na = F) |>
  janitor::adorn_percentages(denominator = 'row') |>
  janitor::adorn_pct_formatting(digits = 1, affix_sign = F) |>
  janitor::adorn_ns() |> 
  janitor::adorn_title(
    'combined',
    row_name = "Group",
    col_name = 'Q26') |>
  gt::gt(
    rowname_col = 'Q26',
    groupname_col = 'Group' 
  ) |>  
  gt::cols_label(
    c('Group/Q26') ~ "Group") |> 
  gt::tab_style(
    style = gt::cell_text(weight = "bold"),
    locations = gt::cells_row_groups()
  ) |> 
  gt::tab_style(
    style = gt::cell_text(weight = 'bold'),
    locations = gt::cells_column_labels()
  ) |> 
  gt::tab_spanner(
    columns = 2:5,
    label = "Confidence for In-person voter safety in Maricopa County, AZ"
  ) |>  
  gt::tab_style(
    style = gt::cell_text(weight = 'bold'),
    locations = gt::cells_column_spanners()
    ) |> 
  gt::tab_footnote(
    footnote = "Table reflects row percentages. NAs omitted") |> 
  gt::tab_footnote(
    footnote = "Q26. How confident, if at all, are you that in person polling places in Maricopa County, AZ \nwill be safe places for voters to cast their ballots during the upcoming elections in November?",
    locations = gt::cells_column_spanners()) |> 
  gt::cols_align(align = 'left', columns = everything()) |> 
  gt::tab_options(
    table.font.size = "small",
    data_row.padding = gt::px(1)
  )



# df |> 
#   janitor::tabyl(group, q26, show_na = F) |>  
#   janitor::adorn_totals('both', na.rm = T) |> 
#   janitor::adorn_percentages(denominator = 'row') |>
#   janitor::adorn_pct_formatting(digits = 1, affix_sign = F) |>
#   janitor::adorn_ns() |> 
#   janitor::adorn_title(
#     'combined',
#     row_name = "Group",
#     col_name = 'Q26') |> 
#   kableExtra::kbl() |> 
#   kableExtra::kable_styling(
#     bootstrap_options = c("striped", "bordered", "condensed", "responsive"),
#     latex_options = "basic",
#     font_size = 13
#   )


```



```{r}
#| fig-cap-location: top
#| fig-cap: "Confidence in Election Administration by Experiment Condition"


df |>
  labelled::set_variable_labels(
    q19 = "Q19. Accurate Vote counts",
    q22 = "Q22. Fair process",
    q23 = "Q23. Fair outcomes",
    q24 = "Q24. Secure Election Tech",
    q26 = "Q26. Safe In-person Voting"
  ) |> 
  ggstats::gglikert(include = c(q19,q22,q23,q24,q26), y = 'group')+
  ggplot2::facet_grid(rows = vars(.question), labeller = label_wrap_gen(15))+
  labs(
    title = "Confidence in Election Administration by Experiment Condition"
  )+
  theme_bw()+
  theme(legend.position = 'bottom')



```




{{< pagebreak >}}


## Survey Questions by Treatment Condition

### Trust and Confidence in AZ Elections


The following cross-tables break down relative observations and percentages of responses to survey questions across categories of the survey's experimental condition. The survey questions in the table below concerned a respondent's degree of trust and confidence in the electoral process in Maricopa County, AZ.

```{r}
#| label: tbl-1
#| tbl-cap: "Trust and Confidence in Maricopa County, AZ Elections by Treatment Condition"
#| column: page
#| results: asis


# q19 to q27 by treatment condition. p-value based on chi^2 test of independence
tab1 <- table1::table1(
  ~ q19.clps
  + q20.clps
  + q21.clps
  + q22.clps
  + q23.clps
  + q24.clps
  + q25.clps
  + q26.clps
  + q27.clps
  + q29.clps | group,
  data = df,
  transpose = F,
  overall = F,
  render.missing = NULL,
  extra.col = list('P-value' = pvalue)
)


# convert table1 object to "kableExtra" "kintr_kable"
tab1 <- table1::t1kable(
  tab1, booktabs = T
  ) |>
  kableExtra::footnote(
    general = "Table reflects column percentages. \nP-values based on Pearson's Chi-squared test of independence."
  ) |> 
  kableExtra::kable_styling(
    bootstrap_options = c("striped", "bordered", "condensed", "responsive"),
    font_size = 13,
    fixed_thead = T
  )
# print table
print(tab1)


```

### Expectation of Electoral Fraud

The next figure and table reviews a set of questions designed to assess a respondent's expectation of electoral fraud of some sort in Maricopa County, AZ. Again, responses are compared across categories of the survey experiment.

For each of the following five statements, survey participants responded with their expectations of the likelihood that each would occur in Maricopa County, Arizona this election cycle on a scale of "Not likely at all" to "Very likely". The five statements were prefaced with the question, "How likely do you think any or all of the following will happen during this year´s elections in Maricopa County, AZ?"

1.    There will be voter fraud, that is, people who are not eligible to vote will vote, or vote more than once;
2.    Many votes will not actually be counted
3.    Many people will show up to vote and be told they are not eligible
4.    A foreign country will tamper with the votes cast in this area to change the results
5.    Election officials in Maricopa County, Arizona will try to discourage some people from voting

```{r}
#| label: fig-q28
#| fig-cap: "Expectation of Electoral Fraud in Maricopa County, AZ by Experiment Condition"

df |> 
  mutate(across(c(q28_1:q28_5), ~ forcats::fct_rev(.))) |> 
  labelled::set_variable_labels(
    q28_1 = "Voter fraud",
    q28_2 = "Vote Miscount",
    q28_3 = "Rejected",
    q28_4 = "Interference",
    q28_5 = "Discouraged"
  ) |> 
  ggstats::gglikert(include = q28_1:q28_5, y = 'group', facet_rows = vars(.question))+
  labs(
    subtitle = "How likely do you think any or all of the following will \nhappen during this year´s elections in Maricopa County, AZ?")+
  theme_bw()
  




```



```{r}
#| label: tbl-2
#| tbl-cap: "Expectation of Electoral Fraud in Maricopa County, AZ by Treatment Condition"
#| column: page
#| results: asis

# q28_1 to q29 by treatment condition p-value based on chi^2 test of independence
tab2 <- table1::table1(
  ~ q28_1.clps
  + q28_2.clps
  + q28_3.clps
  + q28_4.clps
  + q28_5.clps
  | group,
  data = df,
  transpose = F,
  overall = F,
  render.missing = NULL,
  extra.col = list('P-value' = pvalue)
)

# convert table1 object to "kableExtra" "kintr_kable"
tab2 <- table1::t1kable(
  tab2,
  format = "html",
  booktabs = T ) |>
  kableExtra::footnote(
    general = "Table reflects column percentages. \nP-values based on Pearson's Chi-squared test of independence."
  ) |> 
  kableExtra::kable_styling(
    bootstrap_options = c("striped", "bordered", "condensed", "responsive"),
    latex_options = "basic",
    font_size = 13,
    full_width = T,
    fixed_thead = T
  )

# print table
print(tab2)






```

# 3-way Crosstables 

::: {.callout-note}
This section is under construction. A select number of 3-way cross tables will be presented here.
:::


```{r}
#| label: tbl-q19q7
#| tbl-cap: "Confidence in Accurate Vote Counts among those who do and do not believe the 2020 election was legitimate by Treatment Condition"

df |> 
  janitor::tabyl(q7, q19, group, show_na = F) |> 
  # janitor::adorn_totals("both") |> 
  janitor::adorn_percentages("row") |> 
  janitor::adorn_pct_formatting(digits = 2, affix_sign = F) |>
  janitor::adorn_ns("rear") |> 
  janitor::adorn_title("combined", 
                       row_name = "Q7. Legitimacy of 2020 Election",
                       col_name = "Q19") |>
  bind_rows(.id = "group_var") |>   
  gt::gt(
    rowname_col = "row_var",
    groupname_col = "group_var") |>  
  gt::row_group_order(groups = c("Control", "Treatment")) |> 
  gt::cols_label(
    c('Q7. Legitimacy of 2020 Election/Q19') ~ "Q7. Legitimacy of 2020 Election") |>
  # gt::cols_label_with(columns = '...1', fn = ~sjlabelled::get_label(df$q5.clps)) |> 
  gt::tab_style(
    style = gt::cell_text(weight = "bold"),
    locations = gt::cells_row_groups()
  ) |> 
  gt::tab_style(
    style = gt::cell_text(weight = 'bold'),
    locations = gt::cells_column_labels()
  ) |> 
  gt::tab_spanner(
    columns = 3:6,
    label = "Q19. Vote Count Confidence for Maricopa County, AZ"
  ) |> 
  gt::tab_style(
    style = gt::cell_text(weight = 'bold'),
    locations = gt::cells_column_spanners()
    ) |> 
  gt::tab_footnote(
    footnote = "Table reflects row percentages. NAs omitted") |> 
  gt::tab_footnote(
    footnote = "Q19. How confident are you that votes in Maricopa County, AZ will be counted as voters intend in the elections this November?",
    locations = gt::cells_column_spanners()) |> 
  gt::tab_footnote(
    footnote = "Q7.Regardless of whom you supported in the 2020 election, \ndo you think Joe Biden's election as president was legitimate, or was he not legitimately elected?",
    locations = gt::cells_column_labels('Q7. Legitimacy of 2020 Election/Q19')
    ) |> 
  gt::cols_align(align = 'left', columns = everything()) |> 
  gt::tab_options(
    table.font.size = "small",
    data_row.padding = gt::px(1)
  )





```






## Impacts on Confidence

### Impact on confidence in fairness and accuracy of elections

The following examines survey questions that asked respondents whether particular circumstances or election official actions would have any impact on their confidence in the fairness and accuracy of elections. Survey participants responded to six statements, all prefaced with the following,

> "Regardless of whether any of these are actually the case, how would the following impact your confidence in the fairness and accuracy of elections conducted this November?"

1.    Election officials test every machine used in the election to ensure they are secure.
2.    Election officials conduct audits of ballots after every election to confirm the results were accurate.
3.    Poll watchers affiliated with the political parties or candidates observe the election.
4.    Election staff and volunteers include military veterans and their family members from the community[^1].
5.    Election staff and volunteers include lawyers from the community.
6.    Election staff and volunteers include college students from the community.

For each statement, survey participants responded by selecting one of five response options:

1.    Decrease confidence a lot
2.    Decrease confidence somewhat
3.    No impact on confidence
4.    Increase confidence somewhat
5.    Increase confidence a lot


The primary interest concerned whether confidence in election fairness would increase or decreased based on the composition of election staff and volunteers. Of particular importance are responses to the statement which asked respondents to consider whether inclusion of military veterans and veteran's family members as election staff and volunteers has any impact on their confidence in the fairness and accuracy of elections in November. In this case, significant differences were observed between treatment and control groups. 

The figure below displays a clear boost in confidence when election staff includes veterans and family members, but most especially for those who were in the treatment group. That is, the percentage of people who said their confidence in election fairness would increase when election staff includes veterans was about 11.6 percentage points higher than those who said the same in the control group.

::: {.panel-tabset}

## Fig Q41

```{r}
#| label: fig-q41
#| fig-column: page-inset-right


# Q41.4 (vets), Q41.5 (lawyers), Q41.6 (students), by treatment
df |> 
  ggstats::gglikert(include = c(q41.4:q41.6), y = 'group',  symmetric = T, add_totals = F)+ 
  facet_grid(rows = vars(.question), labeller = label_wrap_gen(15))+
  labs(
    title = "Impact on Confidence in Election Fairness and Accuracy by Experiment Condition",
    subtitle = "Q41. How would the following impact your confidence in the fairness and accuracy of elections conducted this November?"
  )+
  theme_bw()+
  theme(legend.position = 'bottom')




```

```{r}
#| include: false


mod.q41.1 <- lm(formula = q41.1.clps.dum ~ group, data = df)
mod.q41.2 <- lm(formula = q41.2.clps.dum ~ group, data = df)
mod.q41.3 <- lm(formula = q41.3.clps.dum ~ group, data = df)
mod.q41.4 <- lm(formula = q41.4.clps.dum ~ group, data = df)
mod.q41.5 <- lm(formula = q41.5.clps.dum ~ group, data = df)
mod.q41.6 <- lm(formula = q41.6.clps.dum ~ group, data = df)

# place all the models in a list assigned as 'models' and include them in the
# ggstats::ggcoef_compare() function
models.q41 <- list(
  "Test Every Machine" = mod.q41.1,
  "Audit Ballots" = mod.q41.2,
  "Partisan Poll Watchers" = mod.q41.3,
  "Election Staff Includes Veterans" = mod.q41.4,
  "Election Staff Includes Lawyers" = mod.q41.5,
  "Election Staff Includes Students" = mod.q41.6
)
```

## Q41 Coef Plot

```{r}
#| label: fig-q41-coef-plot
#| fig-column: page-inset-right
#| warning: false
#| message: false

# print the coef plot and selectively color coefficients
ggstats::ggcoef_compare(
  models.q41, 
  conf.int = T, 
  add_reference_rows = F,
  categorical_terms_pattern = "{level} (ref: {reference_level})")+
  ggplot2::scale_color_manual(
    values = c("black", "black", "black", "red", "black", "black"))+
  labs(
    title = "Impact on Confidence in Election Fairness when Election Staff \nIncludes Veterans and Family by Experiment Condition",
    subtitle = "Means comparison with 95% confidence intervals\n'Increase in confidence' = 1, 'No increase in confidence = 0'",
    caption = "estimate = 0.11635, SE = 0.02799, t-statistic = 4.157, CI [-0.171, -0.0614]"
  )+
  theme_bw()+
  theme(legend.position = 'bottom')


```

:::

An 11.6 percentage point difference was observed between treatment and control groups among those who reported that their confidence in the fairness and accuracy of elections would "increase a lot" or "increase somewhat" when election staff and volunteers include (or consist of a majority of) military service veterans and their family members in the community. This difference was estimated with 95% confidence to be statistically significant (p < 0.01, CI [-0.169, -0.057]).  Conversely, no difference was observed between treatment and control groups among those who reported that their confidence would "decrease a lot" or "decrease somewhat".


[^1]: Two different versions of this statement was presented to survey participants. Half of the sample read the statement as, "Election staff and volunteers *include* military veterans and their family members from the community", whereas the other half of the sample read, "The *majority* of election staff and volunteers consist of military veterans and their family members from the community." No significant differences in responses were observed between those who read one version of the statement over the other. However, the same was done for statements number 5 and 6 which concern "lawyers from the community" and "college students from the community". Significant differences were found when comparing responses between the different versions of these statements. See the appendix for further discussion on these results.  


In the following table, responses were collapsed into three categories. Any increase in confidence (e.g., increase confidence a lot, increase confidence somewhat) were collapsed into one column, and likewise for any response indicating a decrease in confidence.

```{r}
#| label: tbl-4
#| tbl-cap: "Confidence Impact on Election Fairness and Accuracy"
#| column: body-outset-right
#| results: asis

# Simple Crosstab to show response breakdown by experiment condition
# NAs omitted. 
df |>
  mutate(
    confimpct_vets = dplyr::case_when(
      q41.4.clps == "increase" ~ 'Increase Confidence',
      q41.4.clps == "no_impact" ~ 'No Impact',
      q41.4.clps == 'decrease' ~ 'Decrease Confidence'
      )) |> 
  janitor::tabyl(group, confimpct_vets,  show_na = F) |> 
  janitor::adorn_totals('both') |> 
  janitor::adorn_percentages('row') |> 
  janitor::adorn_pct_formatting(digits = 2, affix_sign = T) |> 
  janitor::adorn_ns("rear") |> 
  janitor::adorn_title(
    'combined',
    row_name = "Condition", 
    col_name = 'Election staff include veterans and family'
    ) |> 
  dplyr::relocate(
    "No Impact", .before = "Increase Confidence"
  ) |> 
  kableExtra::kbl() |> 
  kableExtra::footnote(
    general = "NA omitted. % (n)"
    ) |> 
  kableExtra::kable_styling(
    bootstrap_options = c("striped", "bordered", "condensed", "responsive"),
    latex_options = "basic",
    font_size = 13,
    full_width = T,
    fixed_thead = T
  )
  

```




These results suggest that reading a vignette about county efforts to recruit veterans as election staff and volunteers does more to increase one's confidence in the fairness and accuracy of elections, especially under the prospect that election staff and volunteers would include veterans and their family members.

### Impact on Confidence in Voter Safety at polling sites


The same analysis was conducted for questions that assessed the reported impact on confidence that voters would be safe to vote in-person. Survey participants provided responses to the same six statements as before, which were all prefaced with the following question,

> "How would the following impact your confidence that voters are safe from violence, threats of violence, or intimidation while voting in-person during elections this November?"

Again, the bar graph below displays a clear boost among participants in the treatment group who reported that their confidence in voter safety would increase when election staff is said to include veterans and their family members. 

::: {.panel-tabset}

## Fig Q43

```{r}
#| label: fig-q43
#| fig-column: page-inset-right



# Q43.4 (vets), Q43.5 (lawyers), Q43.6 (students) by treatment 
df |> 
  ggstats::gglikert(include = c(q43.4:q43.6), y = 'group', symmetric = T, add_totals = F)+ 
  facet_grid(rows = vars(.question), labeller = label_wrap_gen(15))+
  labs(
    title = "Impact on Confidence in Voter Safety at Polling Sites by Experiment Condition",
    subtitle = "Q43. How would the following impact your confidence that voters are safe from violence, threats of violence, or intimidation while voting in-person during elections this November?"
  )+
  theme_bw()+
  theme(legend.position = 'bottom')


```

```{r}
#| include: false


mod.q43.1 <- lm(formula = q43.1.clps.dum ~ group, data = df)
mod.q43.2 <- lm(formula = q43.2.clps.dum ~ group, data = df)
mod.q43.3 <- lm(formula = q43.3.clps.dum ~ group, data = df)
mod.q43.4 <- lm(formula = q43.4.clps.dum ~ group, data = df)
mod.q43.5 <- lm(formula = q43.5.clps.dum ~ group, data = df)
mod.q43.6 <- lm(formula = q43.6.clps.dum ~ group, data = df)

# place all the models in a list assigned as 'models' and include them in the
# ggstats::ggcoef_compare() function
models.q43 <- list(
  "Test Every Machine" = mod.q43.1,
  "Audit Ballots" = mod.q43.2,
  "Partisan Poll Watchers" = mod.q43.3,
  "Election Staff Includes Veterans" = mod.q43.4,
  "Election Staff Includes Lawyers" = mod.q43.5,
  "Election Staff Includes Students" = mod.q43.6
)
```

## Q43 Coef Plot

```{r}
#| label: fig-q43-coefplot
#| fig-column: page-inset-right
#| warning: false
#| message: false


# print the coef plot and selectively color coefficients
ggstats::ggcoef_compare(
  models.q43, 
  conf.int = T, 
  add_reference_rows = F, 
  categorical_terms_pattern = "{level} (ref: {reference_level})")+
  ggplot2::scale_color_manual(
    values = c("black", "black", "black", "red", "black", "black"))+
  labs(
    title = "Impact on Confidence in Voter Safety when Election Staff \nIncludes Veterans and Family by Experiment Condition",
    subtitle = "Means comparison with 95% confidence intervals\n'Increase in confidence' = 1, 'No increase in confidence = 0'",
    caption = "estimate = 0.0841, SE = 0.0280, t-statistic = 3.00, CI [0.0291, 0.139]"
  )+
  theme_bw()+
  theme(legend.position = 'bottom')


```

:::

The proportion of people who said their confidence in voter safety would increase when election staff includes veterans was about 8.4 percentage points higher than those who said the same in the control group.


```{r}
#| label: tbl-7
#| tbl-cap: "Confidence Impact on In-person Voter Safety"
#| results: asis


# Simple Crosstab to show response breakdown by experiment condition
# NAs omitted. 
df |>
  mutate(
    confimpct_vets = dplyr::case_when(
      q43.4.clps == "increase" ~ 'Increase Confidence',
      q43.4.clps == "no_impact" ~ 'No Impact',
      q43.4.clps == 'decrease' ~ 'Decrease Confidence'
      )) |> 
  janitor::tabyl(group, confimpct_vets,  show_na = F) |> 
  janitor::adorn_totals('both') |> 
  janitor::adorn_percentages('row') |> 
  janitor::adorn_pct_formatting(digits = 2, affix_sign = T) |> 
  janitor::adorn_ns("rear") |> 
  janitor::adorn_title(
    'combined',
    row_name = 'Condition',
    col_name = 'Election staff include veterans and family') |>
  dplyr::relocate(
    "No Impact", .before = "Increase Confidence"
  ) |> 
  kableExtra::kbl() |> 
  kableExtra::footnote(
    general = "NA omitted. % (n)"
    ) |> 
  kableExtra::kable_styling(
    bootstrap_options = c("striped", "bordered", "condensed", "responsive"),
    latex_options = "basic",
    font_size = 13,
    full_width = T,
    fixed_thead = T
  )
  



```


# Sample Demographics and Balance

The decision was made to exclude any respondents who didn't complete the survey. There were a total of 125 respondents who started but didn't finish the survey. Of those 125, 105 quit before reaching `Q40_1`, whereas the rest exited the survey after that question[^2].

[^2]: Due to the programming of the survey, respondents were randomly assigned to either question set 'A' or question set 'B'. The grouping variable in the data set is `Qset`. Those respondents assigned to `Qset A` answered questions `Q41` and `Q43`; those assigned to `Qset B` answered question `Q44` and `Q46`. For each question, respondents were presented six statements and selected a response on a 5-point scale from "Decrease Confidence a lot" to "Increase confidence a lot". The six statements were the same for each question. This resulted in six variables per question within the data set (e.g., Q41_1 to Q41_6), where each variable consisted of responses to one of the six particular statements. Tests of differences in proportion between the question sets determined that responses were mostly equivalent between question sets (i.e., no statistically significant differences between proportions) except for the fifth and sixth statements pertaining to lawyers and college students. More detailed information on the results of this analysis are given in a supplementary document. 

 `NA` missing values from the `Qset` variable removes those 105 partial survey responses, i.e., respondents who quit prior to reaching `Q40`.


```{r}
#| label: tbl-demog
#| tbl-cap: "Survey sample characteristics by treatment condition"
#| column: page
#| results: asis

# descriptive stats for df
t1.demog <- table1::table1(
  ~age_cat
  + gender_3cat
  + race
  + educ
  + partyid_3cat
  + milserv1
  + milserv2
  + milservfam
  + voted2020.clps
  + choice2020
  + voteintent
  | group,
  data = df,
  overall = "Overall",
  footnote = "Table reflects column percentages.")


t1.demog <- table1::t1kable(t1.demog) |> 
  kableExtra::kable_styling(
    bootstrap_options = c("striped", "bordered", "condensed", "responsive"),
    latex_options = "basic",
    font_size = 13,
    full_width = T,
    fixed_thead = T
  )

print(t1.demog)

```


# Appendix {.appendix}


